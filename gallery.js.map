{"version":3,"file":"gallery.js","sources":["../src/js/createGalleryCard.js","../src/js/UnsplashAPI.js","../src/js/gallery.js"],"sourcesContent":["const gallery = document.querySelector('.gallery');\n\nexport function renderGallery(photos) {\n  const markup = photos\n    .map(\n      ({ alt_description, urls: { small } }) =>\n        `\n     <li class=\"gallery-item\">\n            <img class=\"gallery-img\" src=\"${small}\" alt=\"${alt_description}\">\n          </li>\n    `\n    )\n    .join('');\n  gallery.innerHTML = markup;\n}\n","import axios from 'axios';\n\nexport class UnsplashAPI {\n  #BASE_URL = 'https://api.unsplash.com/search/photos';\n  #API_KEY = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58';\n  #query = \"\";\n\n  async getPopularPhotos(page) {\n    const url = `${this.#BASE_URL}?client_id=${\n      this.#API_KEY\n    }&query=popular&page=${page}&per_page=12&orientation=portrait`;\n    try {\n      const { data } = await axios(url);\n      return data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  set query(newQuery) {\n    this.#query = newQuery;\n  }\n  async getPhotosByQuery(page) {\n    const url = `${this.#BASE_URL}?client_id=${\n      this.#API_KEY\n    }&query=${this.#query}&page=${page}&per_page=12&orientation=portrait`;\n    try {\n      const { data } = await axios(url);\n      return data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n","// / Створи додаток для пошуку зображень по ключовому слову.\n// // При завантаженні сторінки має відбуватись запит за популярними зображеннями (ключове слово - popular),\n// // а при введенні якогось слова в форму - пошук відбувається по цьому ключовому слову і сторінка перемальовується.\n\n// // Використовуй UnsplashAPI (https://unsplash.com/documentation) для запитів. Створи клас UnsplashAPI для інкапсуляції\n// // логіки запитів в одному місті в окремому файлі.\n// // Створи окремо файл createGalleryCard.js, в якому буде функція, що відповідатиме за створення розмітки.\n// // В головному файлі gallery.js має бути вся логіка роботи застосунку.\n\n// // Підключи пагінацію, використовуючи бібліотеку tui-pagination, щоб можна було робити запит за різними сторінками.\n// // Додай слухача на форму, щоб робити новий запит по ключовому слову (додавши відповідний метод класу UnsplashAPI).\n// // Додай лоадер під час завантаження даних з бекенда.\n// // Не забудь про відповідні перевірки і сповіщення при роботі з запитами і з формою.\nimport \"tui-pagination/dist/tui-pagination.min.css\"\nimport Pagination from 'tui-pagination';\nimport { renderGallery } from './createGalleryCard';\nimport { UnsplashAPI } from './UnsplashAPI';\nimport iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst api = new UnsplashAPI();\n\nconst container = document.getElementById('tui-pagination-container');\nconst searchForm = document.querySelector(\".js-search-form\");\n\nsearchForm.addEventListener(\"submit\", async event => {\n  event.preventDefault();\n\n  const inputValue = event.target.elements.query.value.trim();\n  if (inputValue === \"\") {\n    iziToast.warning({ message: 'Enter something for search!' });\n    return;\n  }\n  api.query = inputValue;\n\n  pagination.off('afterMove', paginationPopular);\n  pagination.off('afterMove', paginationByQuery);\n\n  try {\n    const data = await api.getPhotosByQuery(page)\n    if (data.results.length === 0) {\n      iziToast.error({ message: 'Images not found!' });\n      return;\n    }\n    renderGallery(data.results);\n    pagination.reset(data.total);\n    pagination.on('afterMove', paginationByQuery);\n    iziToast.success({ message: `We found ${data.total} images.` });\n\n    } catch (error) {\n    console.log(error);\n    iziToast.error({ message: 'Oops somthing went wrong!' });\n  }\n})\n\nconst pagination = new Pagination(container, {\n  totalItems: 0,\n     itemsPerPage: 12,\n     visiblePages: 5,\n     page: 1, });\nconst page = pagination.getCurrentPage();\n\napi.getPopularPhotos(page).then(({ results, total }) => {\n  renderGallery(results);\n  pagination.reset(total);\n});\n\npagination.on('afterMove', paginationPopular);\nfunction paginationPopular(event) {\n     const currentPage = event.page;\n     api.getPopularPhotos(currentPage).then(({ results }) => {\n  renderGallery(results);\n});\n};\n\nfunction paginationByQuery(event) {\n  const currentPage = event.page;\n  api.getPhotosByQuery(currentPage).then(({ results }) => {\n    renderGallery(results);\n  })\n};\n"],"names":["gallery","renderGallery","photos","markup","alt_description","small","UnsplashAPI","__privateAdd","_BASE_URL","_API_KEY","_query","page","url","__privateGet","data","axios","error","newQuery","__privateSet","api","container","searchForm","event","inputValue","iziToast","pagination","paginationPopular","paginationByQuery","Pagination","results","total","currentPage"],"mappings":"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"}