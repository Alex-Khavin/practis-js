var f=e=>{throw TypeError(e)};var P=(e,t,o)=>t.has(e)||f("Cannot "+o);var n=(e,t,o)=>(P(e,t,"read from private field"),o?o.call(e):t.get(e)),u=(e,t,o)=>t.has(e)?f("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,o),v=(e,t,o,r)=>(P(e,t,"write to private field"),r?r.call(e,o):t.set(e,o),o);import"./assets/styles-BgSJf0tJ.js";import{a as $,i as g,P as B}from"./assets/vendor-BK8-1dZR.js";const _=document.querySelector(".gallery");function h(e){const t=e.map(({alt_description:o,urls:{small:r}})=>`
     <li class="gallery-item">
            <img class="gallery-img" src="${r}" alt="${o}">
          </li>
    `).join("");_.innerHTML=t}var i,l,c;class L{constructor(){u(this,i,"https://api.unsplash.com/search/photos");u(this,l,"gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58");u(this,c,"")}async getPopularPhotos(t){const o=`${n(this,i)}?client_id=${n(this,l)}&query=popular&page=${t}&per_page=12&orientation=portrait`;try{const{data:r}=await $(o);return r}catch(r){console.log(r)}}set query(t){v(this,c,t)}async getPhotosByQuery(t){const o=`${n(this,i)}?client_id=${n(this,l)}&query=${n(this,c)}&page=${t}&per_page=12&orientation=portrait`;try{const{data:r}=await $(o);return r}catch(r){console.log(r)}}}i=new WeakMap,l=new WeakMap,c=new WeakMap;const s=new L,m=document.getElementById("tui-pagination-container"),M=document.querySelector(".js-search-form"),p=document.querySelector(".loader");M.addEventListener("submit",async e=>{e.preventDefault();const t=e.target.elements.query.value.trim();if(t===""){g.warning({message:"Enter something for search!"});return}s.query=t,a.off("afterMove",E),a.off("afterMove",q),y(p);try{const o=await s.getPhotosByQuery(w);if(o.results.length===0){g.error({message:"Images not found!"});return}h(o.results),a.reset(o.total),a.on("afterMove",q),g.success({message:`We found ${o.total} images.`}),o.total<=12?d(m):y(m)}catch(o){console.log(o),g.error({message:"Oops somthing went wrong!"})}finally{d(p)}});const a=new B(m,{totalItems:0,itemsPerPage:12,visiblePages:5,page:1}),w=a.getCurrentPage();s.getPopularPhotos(w).then(({results:e,total:t})=>{h(e),a.reset(t)});a.on("afterMove",E);function E(e){const t=e.page;s.getPopularPhotos(t).then(({results:o})=>{h(o)})}function q(e){const t=e.page;y(p),s.getPhotosByQuery(t).then(({results:o})=>{h(o)}).finally(()=>d(p))}function y(e){e.classList.remove("hidden")}function d(e){e.classList.add("hidden")}
//# sourceMappingURL=gallery.js.map
